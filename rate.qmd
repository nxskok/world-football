---
title: "rate"
---

## Packages

```{r}
library(tidyverse)
library(posterior)
library(cmdstanr)
options(mc.cores = 4)
source("functions.R")
source("rate_functions.R")
source("predictions_functions.R")
```

## next rate thing

```{r}
all_next_rate_date(leagues) -> leagues0
leagues0 %>% select(fname, next_rate, dow) %>% View("League rate dates")
leagues0  %>% 
  filter(next_rate < now()) -> leagues1
```

## pass the relevant ones from there into here

```{r}
leagues1 %>% update_rate() 
```

## rating rank and update predictions

```{r}
#| warning: false

xxx <- make_all_ranks(leagues)
nrow(xxx)
update_predictions(leagues)
```
