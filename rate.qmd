---
title: "rate"
format: html
---

## Packages

```{r}
library(tidyverse)
library(cmdstanr)
source("functions.R")
source("rate_functions.R")
```

try it

```{r}
leagues %>% slice(90) %>% 
  mutate(fname = make_fname(country, league, season, part, prefix = "")) %>% pull(fname) -> my_fname
# my_fname <- "wal_premier-league_2023-2024.rds"
# my_fname <- "nor_eliteserien_2023.rds"
# my_fname <- "swe_allsvenskan_2023.rds"
my_fit <- rate(my_fname)
```

```{r}
typeof(my_fit$fit)
```

```{r}
# my_fit$fit$summary()
rating_table(my_fname) %>% View()
```

this seems to make sense

## do more than one

find the ones that need doing and do them (or some of them)

```{r}
update_rate(leagues) 
```
