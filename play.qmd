# Using worldfootball.net to get soccer results

This is a sandbox to make things go.

Typical url is

```{r}
#| eval: false
my_url <- "https://www.worldfootball.net/all_matches/eng-premier-league-1996-1997/"
```

packages

```{r}
library(tidyverse)
library(rvest)
library(conflicted)
conflicts_prefer(dplyr::filter)
source("functions.R")
```



```{r}
leagues %>% mutate(fname = make_fname(country, league, season, part))
```


download all leagues

```{r}
#| warning: false
# download_these(leagues)
```

get leagues I don't have any of yet

```{r}
#| warning: false
leagues %>% mutate(fname = make_fname(country, league, season, part)) %>% 
  mutate(mtime = file.mtime(fname)) %>% 
  filter(is.na(mtime)) -> l_to_get
l_to_get
download_these(l_to_get)
```


```{r}
leagues
display_league(leagues, 73) %>% View()
```





games that may have finished (or started) since last download


```{r}
#| warning: false
update_leagues(leagues)
```

ratings

method 1: update ratings each time each league is updated (extra computation)
method 2: do it like 25, have a target date for the next rate and rerate the ones that have reached the target date

next task

rate a league

after that

sim-league
for predict-the-football

